# AlphaFold3 Parallel Sync Configuration
# 
# This file controls the parallelism settings for the sync operations
# Modify these values to tune performance based on your cluster and data size

# === ARRAY JOB SETTINGS ===
# Number of jobs to process per array task
# Higher values = fewer array tasks but more work per task
# Lower values = more array tasks but better granularity for failures
JOBS_PER_TASK=500

# Maximum number of concurrent array tasks
# Set based on cluster policy and resource availability
MAX_ARRAY_TASKS=20

# === PARALLEL PROCESSING ===
# Number of parallel rsync operations per array task
# Should not exceed SLURM_CPUS_PER_TASK
PARALLEL_WORKERS=16

# Timeout for individual rsync operations (seconds)
# Prevents hanging on problematic jobs
RSYNC_TIMEOUT=60

# === RESOURCE ALLOCATION ===
# SLURM resources per array task
CPUS_PER_TASK=16
MEMORY_PER_TASK="24G"
TIME_LIMIT="4:00:00"
PARTITION="hns"

# === DIRECTORIES ===
# Base directories (usually don't need to change)
BASE_DIR="/scratch/groups/ogozani/alphafold3"
JOBS_DIR="${BASE_DIR}/jobs"
OUTPUT_DIR="${BASE_DIR}/output"
LOGS_DIR="${BASE_DIR}/logs"

# === RSYNC OPTIONS ===
# Additional rsync flags for optimization
RSYNC_EXTRA_OPTS="--inplace"

# Exclude patterns (in addition to the standard *_data.json and TERMS_OF_USE.md)
RSYNC_EXCLUDE_PATTERNS=()

# === MONITORING ===
# Report progress every N jobs processed
PROGRESS_REPORT_INTERVAL=100

# Create checkpoint files for resumability
ENABLE_CHECKPOINTS=true
CHECKPOINT_DIR="${BASE_DIR}/sync_checkpoints"

# === DEBUG/TESTING ===
# Enable verbose output for troubleshooting
DEBUG_MODE=false

# Limit processing to first N jobs (0 = no limit, for testing)
MAX_JOBS_LIMIT=0
